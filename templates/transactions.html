{% extends "base.html" %}
{% block title %}Transactions{% endblock %}
{% block content %}
<div class="container" style="padding: 100px 0;">
  <h1 class="text-center" style="color: var(--text-color); font-size: 3rem;">Transactions</h1>
  {% if transactions %}
    <div class="text-center" style="margin-bottom: 20px;">
      <label for="transaction-filter" style="font-size: 1.4rem; color: var(--text-color);">Filter by Type:</label>
      <select id="transaction-filter" class="form-select" style="display: inline-block; width: auto; font-size: 1.4rem; background-color: black; color: var(--text-color);">
        <option value="all">All</option>
        <option value="buy">Buy</option>
        <option value="sell">Sell</option>
      </select>
    </div>
    <div class="table-responsive">
      <table class="table table-bordered" style="font-size: 1.4rem; color: var(--text-color); background-color: black;">
        <thead>
          <tr>
            <th>Stock</th>
            <th>Type</th>
            <th>Shares</th>
            <th>Price</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody id="transaction-table-body">
          {% for tx in transactions %}
          <tr data-type="{{ tx.transaction_type }}">
            <td>{{ tx.symbol }}</td>
            <td>{{ tx.transaction_type|capitalize }}</td>
            <td>{{ tx.shares }}</td>
            <td>{{ tx.price|currency }}</td>
            <td>{{ tx.transaction_date }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="text-center" style="margin-top: 20px; font-size: 1.6rem; color: var(--text-color);">
      <h3>Total Account Value: {{ total_value|currency }}</h3>
    </div>
  {% else %}
    <p class="text-center" style="color: var(--text-color); font-size: 1.4rem;">No transactions recorded yet.</p>
  {% endif %}
</div>
<script>
  document.getElementById('transaction-filter').addEventListener('change', function () {
    const filter = this.value;
    const rows = document.querySelectorAll('#transaction-table-body tr');
    rows.forEach(row => {
      if (filter === 'all' || row.dataset.type === filter) {
        row.style.display = '';
      } else {
        row.style.display = 'none';
      }
    });
  });
</script>
{% endblock %}
